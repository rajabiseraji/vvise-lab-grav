(window.webpackJsonp__wix_thunderbolt_app=window.webpackJsonp__wix_thunderbolt_app||[]).push([[77],{330:function(e,n,t){"use strict";t.r(n),t.d(n,"site",(function(){return s}));var a=t(51),r=t(493),o=t(214);t.d(n,"MasterPageTpaPropsCacheSymbol",(function(){return o.a})),t.d(n,"TpaSrcBuilderSymbol",(function(){return o.d})),t.d(n,"TpaContextMappingSymbol",(function(){return o.b}));var i=t(494),c=t(496),u=t(495);t.d(n,"TpaHandlersManagerSymbol",(function(){return o.c})),t.d(n,"name",(function(){return o.e}));var d=t(405);for(var l in d)["default","site","TpaHandlersManagerSymbol","name","MasterPageTpaPropsCacheSymbol","TpaSrcBuilderSymbol","TpaContextMappingSymbol"].indexOf(l)<0&&function(e){t.d(n,e,(function(){return d[e]}))}(l);var s=function(e){e(a.a.AppDidMountHandler).to(r.a),e(o.a).to(i.a),e(o.b).to(u.a),e(o.d).to(c.a)}},405:function(e,n){},467:function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));var a=t(0),r=function(e,n){var t=e.split("/"),r=t.indexOf(n||"");return r<0||t[r]!==n?null:Object(a.e)(t.splice(r)).slice(1)}},493:function(e,n,t){"use strict";t.d(n,"a",(function(){return p}));var a=t(0),r=t(7),o=t(312),i=t(35),c=t(214),u=t(238),d=t(144),l=function(e){if(e.data)try{return JSON.parse(e.data)}catch(e){}return{}},s=["getWixUpgradeUrl","stylesReady","getViewModeInternal","setHelpArticle"],p=Object(r.h)([u.a,i.a,c.b,o.c,o.b,Object(r.g)(d.a)],(function(e,n,t,r,o,i){return{appDidMount:function(){e.addWindowMessageHandler({canHandleEvent:function(e){return!!(e.source&&(n=l(e),n&&["TPA","TPA2"].includes(n.intent)));var n},handleEvent:function(e){return Object(a.b)(this,void 0,void 0,(function(){var o,u,d,p,f,g,m;return Object(a.d)(this,(function(v){switch(v.label){case 0:return o=l(e),u=o.type,d=o.callId,s.includes(u)?[2]:(p=function(e){var n=e.compId;if(n)return t.getTpaComponentContextId(n)||r.getContextIdOfCompId(n)}(o),f=t.getTpaComponentIdFromTemplate(o.compId),g=Object(a.a)(Object(a.a)({},o),{compId:null!=f?f:o.compId}),m=g.compId,i&&i.tpa.addMessage({msg:g,compId:m,contextId:p}),p?[4,(b=p,Object(a.b)(void 0,void 0,Promise,(function(){return Object(a.d)(this,(function(e){switch(e.label){case 0:return[4,n(b)];case 1:return[2,e.sent().getAllImplementersOnPageOf(c.c)[0]]}}))})))]:(console.error("TPA handler message caller does not belong to any page",{type:u,callId:d,compId:m}),[2]));case 1:return v.sent().handleMessage(e.source,g).catch((function(e){console.error("TpaHandlerError",u,p,m,e)})),[2]}var b}))}))}})}}}))},494:function(e,n,t){"use strict";t.d(n,"a",(function(){return u}));var a=t(19),r=t.n(a),o=t(7),i=t(312),c=t(211),u=Object(o.h)([i.b,c.a],(function(e,n){var t={};return{cacheProps:function(n,a){var o=r.a.omitBy(a||e.get(n),r.a.isFunction);t[n]=r.a.isEmpty(o)?null:o},getCachedProps:function(e){var a,r,o,i,c=t[e];if(c)return(null===(r=null===(a=n.getCurrentRouteInfo())||void 0===a?void 0:a.dynamicRouteData)||void 0===r?void 0:r.publicData)!==(null===(i=null===(o=n.getPreviousRouterInfo())||void 0===o?void 0:o.dynamicRouteData)||void 0===i?void 0:i.publicData)&&delete c.src,c}}}))},495:function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));var a=t(7),r=Object(a.h)([],(function(){var e={},n={};return{registerTpasForContext:function(n,t){t.forEach((function(t){e[t]=n}))},getTpaComponentContextId:function(n){return e[n]},registerTpaTemplateId:function(e,t){n[e]=t},getTpaComponentIdFromTemplate:function(e){return n[e]}}}))},496:function(e,n,t){"use strict";t.d(n,"a",(function(){return h}));var a=t(0),r=t(7),o=t(312),i=t(29),c=t(28),u=t(211),d=t(317),l=t(304),s=t(214),p=t(20),f=t(24),g=t(18),m=t(19),v=t.n(m),b=t(143),I=t(467),y=function(e){var n,t=e.getCurrentConsentPolicy();return(n=t).defaultPolicy&&v.a.every(n.policy)||!e._getConsentPolicyHeader()["consent-policy"]?void 0:decodeURIComponent(e._getConsentPolicyHeader()["consent-policy"])},h=Object(r.h)([o.b,Object(r.f)(i.e,s.e),p.b,f.a,c.a,g.a,u.a,d.a,l.b,Object(r.g)(b.a)],(function(e,n,t,r,o,i,c,u,d,l){var s=n.widgetsClientSpecMapData,p=n.siteRevision,f=n.viewMode,g=n.appSectionParams,m=n.externalBaseUrl,b=n.requestUrl,h=n.extras,C=n.deviceType,O=n.tpaDebugParams,P=n.locale,w=n.timeZone,T=function(){return o?o.location.href:b},j=function(e,n,t){var r=Boolean(t.tpaPageUri&&!v.a.isNil(n)&&n===t.tpaApplicationId),o=Object(a.e)(T().replace(m,"").split("?"),1)[0],i=r&&Object(I.a)(o,t.tpaPageUri);return i?function(e,n){if(0===e.length)return n;var t=e.join("/"),a=new URL(n);return a.pathname+="/"+t,a.href}(i,e):e};return{buildSrc:function(e,n,u,m,b){var I,S,x;void 0===b&&(b={});var R=v.a.merge({tpaInnerRouteConfig:null,extraQueryParams:{},appDefinitionId:""},b),D=u.widgetId,M=u.width,U=u.height,N=u.externalId,_=u.templateId,A=s[D]||{},H=A.applicationId,L=A.appDefinitionId||R.appDefinitionId,E=null===(I=c.getCurrentRouteInfo().dynamicRouteData)||void 0===I?void 0:I.publicData,B=_||e,J=e,F=JSON.stringify(i.getCommonConfig()),k=new URL(T()),Q=Object(a.a)(Object(a.a)({instance:t.getAppInstanceByAppDefId(L),pageId:n,compId:B,viewerCompId:J,siteRevision:""+p,viewMode:f,deviceType:C,externalId:N,locale:P,commonConfig:F,tz:w,vsi:d.viewerSessionId,"consent-policy":y(r),currency:h.currency,currentCurrency:k.searchParams.get("currency")||h.currency,width:v.a.isNumber(M)?""+M:null,height:v.a.isNumber(U)?""+U:null},function(){if(o){var e=new URL(T()).searchParams.get("appSectionParams");return JSON.parse(decodeURIComponent(e||"{}"))||{}}return g}()),R.extraQueryParams);l&&(Q.lang=null===(S=l.currentLanguage)||void 0===S?void 0:S.languageCode,Q.dateNumberFormat=null===(x=l.currentLanguage)||void 0===x?void 0:x.locale,v.a.isNil(l.isOriginalLanguage)||(Q.isPrimaryLanguage=""+l.isOriginalLanguage)),E&&(Q.routerData=JSON.stringify(E)),v.a.entries(O).forEach((function(e){var n=Object(a.e)(e,2),t=n[0],r=n[1];v.a.isNil(r)||(Q[t]=r)}));var W=R.tpaInnerRouteConfig?j(m,H,R.tpaInnerRouteConfig):m,q=new URL(W);return v.a.entries(Q).forEach((function(e){var n=Object(a.e)(e,2),t=n[0],r=n[1];v.a.isNil(r)||q.searchParams.set(t,r)})),q.href}}}))}}]);
//# sourceMappingURL=https://static.parastorage.com/services/wix-thunderbolt/dist/tpaCommons.b4f2d26a.chunk.min.js.map