{% set body_classes = body_class(['header-fixed', 'header-animated', 'header-dark', 'header-transparent', 'sticky-footer']) %}
{% set grid_size = theme_var('grid-size') %}
{% set compress = theme_var('production-mode') ? '.min.css' : '.css' %}

{% use 'blocks/base.html.twig' %}
<!DOCTYPE html>
<html lang="{{ grav.language.getActive ?: grav.config.site.default_lang }}">
<head>
{% block head deferred %}
    <meta charset="utf-8" />
    <title>{% if page.title %}{{ page.title|e('html') }} | {% endif %}{{ site.title|e('html') }}</title>
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    {% include 'partials/metadata.html.twig' %}

    <link rel="icon" type="image/png" href="{{ url('theme://images/favicon.png') }}" />
    <link rel="canonical" href="{{ page.url(true, true) }}" />
{% endblock head %}

{% block stylesheets %}
    {% do assets.addCss('theme://css-compiled/spectre'~compress) %}
    {% if theme_var('spectre.exp') %}{% do assets.addCss('theme://css-compiled/spectre-exp'~compress)  %}{% endif %}
    {% if theme_var('spectre.icons') %}{%  do assets.addCss('theme://css-compiled/spectre-icons'~compress) %}{% endif %}
    {% do assets.addCss('theme://css-compiled/theme'~compress) %}
    {% do assets.addCss('theme://css/custom.css') %}
    {% do assets.addCss('theme://css/line-awesome.min.css') %}
{% endblock %}

{% block javascripts %}
    {% do assets.addJs('jquery', 101) %}
    {% do assets.addJs('theme://js/jquery.treemenu.js', {group:'bottom'}) %}
    {% do assets.addJs('theme://js/site.js', {group:'bottom'}) %}
{% endblock %}

{% block assets deferred %}
    {{ assets.css()|raw }}
    {{ assets.js()|raw }}
{% endblock %}
</head>
<body id="top" class="{% block body_classes %}{{ body_classes }}{% endblock %}">
    <div id="page-wrapper">
    {% block header %}
        <section id="header" class="section">
            <section class="container {{ grid_size }}">
                <nav class="navbar">
                    <section class="navbar-section logo">
                        {% include 'partials/logo.html.twig' %}
                    </section>
                    <section class="navbar-section desktop-menu">

                        <nav class="dropmenu animated">
                        {% block header_navigation %}
                            {% include 'partials/navigation.html.twig' %}
                        {% endblock %}
                        
                        </nav>

                        {% if config.plugins.login.enabled and grav.user.username %}
                            <span class="login-status-wrapper"><i class="fa fa-user"></i> {% include 'partials/login-status.html.twig' %}</span>
                        {% endif %}

                    </section>
                </nav>
            </section>
        </section>
        <div class="mobile-menu">
            <div class="button_container" id="toggle">
                <span class="top"></span>
                <span class="middle"></span>
                <span class="bottom"></span>
            </div>
        </div>
    {% endblock %}

        <section id="start">
        {% block body %}
            <section id="body-wrapper"> {# class="section" for left abnd right spacing #}
                <section class="banner-container">
                    {% block banner %}{% endblock %}
                </section>
                <section class="container {{ grid_size }} p-relative"> 
                    {% block logos %}
                        {% include "partials/logo-section.html.twig" ignore missing %}
                    {% endblock %}
                    
                    {% block intro %}
                    <section id="intro" class="columns">
                        <div class="column col-9 col-mx-auto">
                            <h1 class="intro-title">
                                {{ page.header.desc_title }}
                            </h1>
                            <p class="intro-text">{{page.header.desc[0]}}</p>
                            <p class="intro-text">{{page.header.desc[1]}}</p>

                            <div class="intro-button-container">
                                <a href="" class="main-button round">
                                    <div class="main-button-container">
                                        <span class="main-button-label">
                                            OUR PUBLICATIONS
                                        </span>
                                    </div>
                                </a>
                            </div>

                            <div class="research-field-container">
                                {% for field in page.header.research_fields %}
                                    <div class="research-field-item">
                                        <img src="{{ url('theme://images/' ~ field.icon) }}" alt="{{ field.name }}" class="research-field-img">
                                        <h3 class="research-field-title">
                                            {{ field.title }}
                                        </h3>
                                    </div>
                                {% endfor %}
                            </div>

                            <div class="intro-button-container">
                                <a href="" class="main-button round">
                                    <div class="main-button-container">
                                        <span class="main-button-label">
                                            OUR RESEARCH
                                        </span>
                                    </div>
                                </a>
                            </div>

                            <div class="intro-divider-container">
                                <div class="intro-divider"></div>
                            </div>
                        </div>
                    </section>
                    {% endblock %}

                    {% block news %}
                        <section id="news">
                            <h1 class="intro-title">
                                Latest News
                            </h1>

                            <section id="news-columns" class="columns">
                                <div id="left-column" class="column col-6">
                                    <section id="conference" class="columns">
                                        <div class="column col-4">
                                            <h3>Conference Highlights</h3>
                                        </div>
                                        <div class="column col-8">
                                            <h4 class="conference-label">Presented five papers at ACM VRST 2019:</h4>
                                            <div class="news-list-item">
                                                a novel, efficient text entry solution for VR
                                            </div>
                                            <div class="news-list-item">
                                                a novel, efficient text entry solution for VR
                                            </div>
                                            <div class="news-list-item">
                                                a novel, efficient text entry solution for VR
                                            </div>
                                        </div>
                                    </section>
                                    <section id="defences" class="columns">
                                        <div class="column col-4">
                                            <h3>Recent Thesis Defences</h3>
                                        </div>
                                        <div class="column col-8">
                                            <section class="defence-year-item">
                                                <h4 class="defence-year-label">2019</h4>
                                                <div class="news-list-item">
                                                    Mayra Barrera Machuca (PhD)
                                                </div>
                                                <div class="news-list-item">
                                                    Mayra Barrera Machuca (PhD)
                                                </div>
                                                <div class="news-list-item">
                                                    Mayra Barrera Machuca (PhD)
                                                </div>
                                            </section>
                                        </div>
                                    </section>
                                </div>
                                <div id="right-column" class="column col-6">
                                    <section id="publications">
                                        <h3>
                                            Publications &amp Presentations
                                        </h3>
                                    </section>
                                </div>
                            </section>
                        </section>
                    {% endblock %}
                    
                    {% block messages %}
                        {% include 'partials/messages.html.twig' ignore missing %}
                    {% endblock %}
                    {{ block('content_surround') }}
                </section>
            </section>
        {% endblock %}
        </section>

    </div>

    {% block footer %}
        {% include 'partials/footer.html.twig' %}
    {% endblock %}

    {% block mobile %}
    <div class="mobile-container">
        <div class="overlay" id="overlay">
            <div class="mobile-logo">
                {% include 'partials/logo.html.twig' with {mobile: true} %}
            </div>
            <nav class="overlay-menu">
                {% include 'partials/navigation.html.twig' with {tree: true} %}
            </nav>
        </div>
    </div>
    {% endblock %}

{% block bottom %}
    {{ assets.js('bottom')|raw }}
{% endblock %}

</body>
</html>
